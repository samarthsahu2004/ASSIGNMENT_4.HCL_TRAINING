/* 1. CREATE ROLE */
CREATE ROLE COLLEGE_ADMIN;
CREATE ROLE FACULTY_ROLE;


/* 2. CREATE USERS */
CREATE USER admin_user
  PASSWORD = 'Admin@123'
  DEFAULT_ROLE = COLLEGE_ADMIN
  MUST_CHANGE_PASSWORD = TRUE;

CREATE USER faculty_user
  PASSWORD = 'Faculty@123'
  DEFAULT_ROLE = FACULTY_ROLE
  MUST_CHANGE_PASSWORD = TRUE;


/* 3. ASSIGN ROLES TO USERS*/
GRANT ROLE COLLEGE_ADMIN TO USER admin_user;
GRANT ROLE FACULTY_ROLE TO USER faculty_user;


/* 4. WAREHOUSE ACCESS*/
GRANT USAGE
ON WAREHOUSE HCL_TRAINING
TO ROLE COLLEGE_ADMIN;

GRANT USAGE
ON WAREHOUSE HCL_TRAINING
TO ROLE FACULTY_ROLE;


/* 5. PRIVILEGES FOR COLLEGE_ADMIN (FULL ACCESS)*/
GRANT ALL PRIVILEGES
ON DATABASE COLLEGE_DB
TO ROLE COLLEGE_ADMIN;

GRANT ALL PRIVILEGES
ON ALL SCHEMAS IN DATABASE COLLEGE_DB
TO ROLE COLLEGE_ADMIN;

GRANT ALL PRIVILEGES
ON FUTURE SCHEMAS IN DATABASE COLLEGE_DB
TO ROLE COLLEGE_ADMIN;

GRANT ALL PRIVILEGES
ON ALL TABLES IN DATABASE COLLEGE_DB
TO ROLE COLLEGE_ADMIN;

GRANT ALL PRIVILEGES
ON FUTURE TABLES IN DATABASE COLLEGE_DB
TO ROLE COLLEGE_ADMIN;


/* 6. PRIVILEGES FOR FACULTY_ROLE (READ-ONLY)*/
GRANT USAGE
ON DATABASE COLLEGE_DB
TO ROLE FACULTY_ROLE;

GRANT USAGE
ON SCHEMA COLLEGE_DB.ACADEMICS
TO ROLE FACULTY_ROLE;

GRANT SELECT
ON ALL TABLES IN SCHEMA COLLEGE_DB.ACADEMICS
TO ROLE FACULTY_ROLE;

GRANT SELECT
ON FUTURE TABLES IN SCHEMA COLLEGE_DB.ACADEMICS
TO ROLE FACULTY_ROLE;


/* 7. OPTIONAL: ROLE HIERARCHY */
GRANT ROLE COLLEGE_ADMIN TO ROLE SYSADMIN;
GRANT ROLE FACULTY_ROLE TO ROLE SYSADMIN;  
